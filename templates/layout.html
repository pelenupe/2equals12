<!DOCTYPE html>
<html lang="en">
<head>
  <!-- Meta setup -->
  <meta charset="UTF-8" />
  <meta name="apple-itunes-app" content="app-id=6745202800">
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <!-- Page Title -->
  <title>{% block title %}2 Equals 12{% endblock %}</title>

  <!-- Load Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Google Fonts: Monoton + Oswald -->
  <link href="https://fonts.googleapis.com/css2?family=Monoton&family=Oswald:wght@300;400;600&display=swap" rel="stylesheet">

  <!-- Custom Styles -->
  <link href="/static/css/styles.css" rel="stylesheet">

  <!-- Script to auto-fill date input on pages if needed -->
  <script>
    window.addEventListener('DOMContentLoaded', (event) => {
      const dateInput = document.getElementById('select-date');
      if (dateInput && !dateInput.value) {
        const now = new Date();
        const year = now.getFullYear();
        const month = String(now.getMonth() + 1).padStart(2, '0'); 
        const day = String(now.getDate()).padStart(2, '0');
        const localDate = `${year}-${month}-${day}`;
        dateInput.value = localDate;
      }
    });
  </script>

</head>

<body class="text-white min-h-screen flex flex-col relative">

  <!-- Preloader overlay that shows a spinning favicon while loading -->
  <div id="preloader" class="fixed inset-0 bg-custom-green z-50 flex items-center justify-center hidden">
    <img src="/static/img/favicon.svg" alt="Loading..." id="preloader-logo" class="w-16 h-16">
  </div>

  <!-- Sticky Navigation -->
  <nav id="main-nav" class="sticky top-0 w-full flex justify-between items-center px-6 py-4 z-50 transition-all duration-500 bg-transparent">
    <div class="flex items-center gap-2">
      <a href="/"><img src="/static/img/logo.svg" alt="2 Equals 12" class="h-10"></a>
    </div>
    <div id="nav-links" class="hidden md:flex gap-6 text-sm uppercase font-semibold text-white transition-all duration-500">
      <a href="/" class="hover:underline">Home</a>
      <a href="/topics" class="hover:underline">Topics</a>
      <a href="/about" class="hover:underline">About</a>
      <a href="/quotes" class="hover:underline">Quotes</a>
    </div>
    <!-- Hamburger button for mobile -->
    <div class="md:hidden">
      <button onclick="document.getElementById('mobileNav').classList.toggle('hidden')">
        <div class="flex flex-col gap-1">
          <div class="w-6 h-0.5 bg-black"></div>
          <div class="w-4 h-0.5 bg-black"></div>
          <div class="w-5 h-0.5 bg-black"></div>
        </div>
      </button>
    </div>
  </nav> 

  <!-- Mobile Dropdown Navigation -->
  <div id="mobileNav" class="md:hidden hidden px-6 py-4 space-y-2 bg-black bg-opacity-95 absolute top-16 left-0 right-0 z-40">
    <a href="/" class="block text-sm uppercase font-semibold">Home</a>
    <a href="/topics" class="block text-sm uppercase font-semibold">Topics</a>
    <a href="/about" class="block text-sm uppercase font-semibold">About</a>
    <a href="/quotes" class="block text-sm uppercase font-semibold">Quotes</a>
  </div>

  <!-- Page-specific content will load here -->
  {% block content %}{% endblock %}

  <!-- Footer -->
  <footer class="w-full text-center py-6">
    <p>Â© {{ current_year }} Tchad Blair, LLC. All rights reserved.</p> 
  </footer>

  <!-- Preloader logic to show spinner when navigating -->
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      const preloader = document.getElementById('preloader');

      document.querySelectorAll('a').forEach(link => {
        link.addEventListener('click', function(event) {
          const href = link.getAttribute('href');
          if (href && !href.startsWith('#') && !href.startsWith('javascript')) {
            preloader.classList.remove('hidden');
          }
        });
      });

      window.addEventListener('load', () => {
        preloader.classList.add('hidden');
      });
    });
  </script>      

  <!-- Scroll listener to change nav background on scroll -->
  <script>
    const nav = document.getElementById('main-nav');
    const navLinks = document.getElementById('nav-links');
  
    window.addEventListener('scroll', () => {
      if (window.scrollY > 100) {
        nav.classList.remove('bg-transparent');
        nav.classList.add('bg-white', 'bg-opacity-90', 'shadow-md');
        navLinks.classList.remove('text-white');
        navLinks.classList.add('text-black');
      } else {
        nav.classList.add('bg-transparent');
        nav.classList.remove('bg-white', 'bg-opacity-90', 'shadow-md');
        navLinks.classList.add('text-white');
        navLinks.classList.remove('text-black');
      }
    });
  </script>

</body>
</html>
